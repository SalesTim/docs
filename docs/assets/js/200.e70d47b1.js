(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{443:function(e,t,n){"use strict";n.r(t);var s=n(36),a=function(e){e.options.__data__block__={mermaid_382ee14b:"flowchart TB\n\n    %% Nodes\n\n    subgraph in[Inputs]\n        teams(Microsoft Teams client<br>Desktop, web, mobile)\n        apps(3rd-party apps<br>Custom, Power Automate)\n    end\n\n    pre(Pre-processing)\n    checkteam(Check the source team, status and access)\n    checkcloning(Control the structure and contents to clone)\n    checktemplate(Validate template configuration)\n    checknaming(Control the naming convention)\n    checklocale(Define the appropriate language)\n    checkapproval(Approval required?)\n\n    approval(Approval)\n\n    processing(Processing)\n    creategroup(Create group with the appropriate geo)\n    createteam(Create the team)\n    privacy(Apply privacy public / private)\n    email(Apply email convention to the underlying group)\n    sensitivity(Apply sensitivity labels)\n    photo(Update team picture)\n    files(Clone files and folders)\n    installapps(Install required apps associated with tabs)\n    tabs(Configure and provision all the tabs)\n\n    post(Post-processing)\n    requesterteam(Invite the requester as a member of the team)\n    requestedmembersteam(Invite requested members to the team)\n    permanentmembersteam(Invite permanent members to the team)\n    requesterchannels(Invite the requester to every channel)\n    requestedmemberschannels(Invite requested members to every channel)\n    permanentmemberschannels(Invite permanent members to every channel)\n\n    subgraph out[Outputs]\n        audit(Audit trails)\n        notif(Notification in Teams)\n    end\n    \n    done(End)\n\n    %% Links\n\n    teams --\x3e|Triggers| pre\n    apps --\x3e|Triggers| pre\n\n    pre --\x3e checkteam\n    checkteam --\x3e checkcloning\n    checkcloning --\x3e checktemplate\n    checktemplate --\x3e checknaming\n    checknaming --\x3e checklocale\n    checklocale --\x3e checkapproval\n    checkapproval --\x3e|Yes| approval\n    approval --\x3e|Approved| processing\n    approval --\x3e|Rejected| theend(Done)\n    checkapproval --\x3e|No| processing\n\n\n    processing --\x3e creategroup\n    creategroup --\x3e createteam\n    createteam --\x3e privacy\n    privacy --\x3e email\n    email --\x3e sensitivity\n    sensitivity --\x3e photo\n    photo --\x3e files\n    files --\x3e installapps\n    installapps --\x3e tabs\n    tabs --\x3e post\n\n    post --\x3e requesterteam \n    requesterteam --\x3e requestedmembersteam\n    requestedmembersteam --\x3e permanentmembersteam\n    permanentmembersteam --\x3e requesterchannels\n    requesterchannels --\x3e requestedmemberschannels\n    requestedmemberschannels --\x3e permanentmemberschannels\n\n    permanentmemberschannels --\x3e done\n\n    pre --\x3e out\n    processing --\x3e out\n    post --\x3e out\n    done --\x3e out\n\n    %% Styles\n\n    classDef inputs fill:#9099d8, stroke-width:0px;\n        class teams inputs\n        class apps inputs\n    classDef step fill:#90EE90, stroke-width:0px;\n        class pre step\n        class processing step\n        class post step\n        class done step\n        class theend step\n    classDef outputs fill:#FFFFE0, stroke-width:0px;\n        class audit outputs\n        class notif outputs\n",mermaid_382ee164:"graph TB\n    inputs(Inputs)\n    step(Phase / Step)\n    activity(Activity)\n    outputs(Outputs)\n\n    classDef inputs fill:#9099d8, stroke-width:0px;\n        class inputs inputs\n    classDef step fill:#90EE90, stroke-width:0px;\n        class step step\n    classDef outputs fill:#FFFFE0, stroke-width:0px;\n        class outputs outputs\n"}},r=Object(s.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"provisioning-job"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#provisioning-job"}},[e._v("#")]),e._v(" Provisioning Job")]),e._v(" "),n("p",[n("strong",[e._v("TABLE OF CONTENTS")])]),e._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#process-overview"}},[e._v("Process overview")])]),n("li",[n("a",{attrs:{href:"#inputs"}},[e._v("Inputs")])]),n("li",[n("a",{attrs:{href:"#pre-processing"}},[e._v("Pre-processing")])]),n("li",[n("a",{attrs:{href:"#processing"}},[e._v("Processing")])]),n("li",[n("a",{attrs:{href:"#post-processing"}},[e._v("Post-processing")])]),n("li",[n("a",{attrs:{href:"#outputs"}},[e._v("Outputs")])])])]),n("p"),e._v(" "),n("hr"),e._v(" "),n("h2",{attrs:{id:"process-overview"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#process-overview"}},[e._v("#")]),e._v(" Process overview")]),e._v(" "),n("p",[e._v("A simplified representation of a provisionning job is comprised of the following activities:")]),e._v(" "),n("Mermaid",{attrs:{id:"mermaid_382ee14b",graph:e.$dataBlock.mermaid_382ee14b}}),n("p",[n("strong",[e._v("Legend:")])]),e._v(" "),n("Mermaid",{attrs:{id:"mermaid_382ee164",graph:e.$dataBlock.mermaid_382ee164}}),n("h2",{attrs:{id:"inputs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#inputs"}},[e._v("#")]),e._v(" Inputs")]),e._v(" "),n("p",[e._v("Provisioning jobs execution could be triggered from the following events:")]),e._v(" "),n("ul",[n("li",[e._v("An end-user is requesting the creation of a new team from a Microsoft Teams client.")]),e._v(" "),n("li",[e._v("An external system (Custom application, Power Aotomate...) is using nBold's API to request the creation of a new team.")])]),e._v(" "),n("h2",{attrs:{id:"pre-processing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pre-processing"}},[e._v("#")]),e._v(" Pre-processing")]),e._v(" "),n("p",[e._v("During the pre-processing phase, the provisioning job executes controls to make sure that the appropriate configuration has been defined, and that everything is ready for the processing step:")]),e._v(" "),n("ul",[n("li",[e._v("Controls if the security context gives access to the source team defined in the collaboration template")]),e._v(" "),n("li",[e._v("Controls if the source team is not archived (as due to a Microsoft Graph bug, it denies access to some settings and contents of the team)")]),e._v(" "),n("li",[e._v("Controls the structure and contents that have to be cloned as defined in the template")]),e._v(" "),n("li",[e._v("Controls if the required information are available to apply the naming convention for the team name, team description, email address and welcome message")]),e._v(" "),n("li",[e._v("Define the appropriate language to be used for end-user notifications")]),e._v(" "),n("li",[e._v("If an approval is required by the template, triggers the approval job instead of running the provisioning.")])]),e._v(" "),n("h2",{attrs:{id:"processing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#processing"}},[e._v("#")]),e._v(" Processing")]),e._v(" "),n("p",[e._v("During the processing phase, the job provisions a new team and all the associated contents:")]),e._v(" "),n("ul",[n("li",[e._v("Create a group with the appropriate geo (based on the requester PDL or based on a dynamic rule based on the template / requester profile)")]),e._v(" "),n("li",[e._v('Create a team from the previously created group (aka "teamsify")')]),e._v(" "),n("li",[e._v("Apply team privacy (public / private)")]),e._v(" "),n("li",[e._v("Apply the email convention to the underlying group email alias")]),e._v(" "),n("li",[e._v("Apply sensitivity labels to the underlying group")]),e._v(" "),n("li",[e._v("Update team picture from the source team")]),e._v(" "),n("li",[e._v("Clone files and folders from the source team to the newly created one")]),e._v(" "),n("li",[e._v("Install all the required apps associated with tabs from the source team")]),e._v(" "),n("li",[e._v("Configure and all the tabs and provision their content if it is supported by the associated app")])]),e._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[e._v("Note")]),e._v(" "),n("p",[e._v("Depending on the configuration defined from the "),n("code",[e._v("Settings")]),e._v(" tab, the provisioning job could be executed in the security context of:")]),e._v(" "),n("ul",[n("li",[e._v("A registered service account. In this context, the provisioning job uses the permissions defined in the "),n("RouterLink",{attrs:{to:"/trust-center/microsoft-graph-permissions.html#service-account-scope"}},[e._v("Service account scope")]),e._v(".")],1),e._v(" "),n("li",[e._v("An Azure AD registered app. In this context, the provisioning job uses the permissions defined in the "),n("RouterLink",{attrs:{to:"/trust-center/microsoft-graph-permissions.html#application-scope"}},[e._v("Application scope")]),e._v(".")],1)])]),e._v(" "),n("h2",{attrs:{id:"post-processing"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#post-processing"}},[e._v("#")]),e._v(" Post-processing")]),e._v(" "),n("p",[e._v("During the processing phase, once the team structure and contents are fully provisioned, the job invites the required users to both the team and its channels:")]),e._v(" "),n("ul",[n("li",[e._v("Invite the requester to the team, as a member / owner depending on the template configuration")]),e._v(" "),n("li",[e._v("Invite members and owners requested by the requester to the team")]),e._v(" "),n("li",[e._v("Invite permanent members and owners defined in the template to the team")]),e._v(" "),n("li",[e._v("Invite the requester as a member / owner to every private and shared channels, depending on the template configuration")]),e._v(" "),n("li",[e._v("Invite members and owners requested by the requester to every private and shared channels")]),e._v(" "),n("li",[e._v("Invite permanent members and owners defined in the template to every private and shared channels")])]),e._v(" "),n("h2",{attrs:{id:"outputs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#outputs"}},[e._v("#")]),e._v(" Outputs")]),e._v(" "),n("p",[e._v("During the different phases, the provisioning job generates events that are handled by two different modules:")]),e._v(" "),n("ul",[n("li",[e._v("The audit trails module creates a new record for each event")]),e._v(" "),n("li",[e._v("The notification module send a notification in the "),n("code",[e._v("general")]),e._v(" channel of the created team")])]),e._v(" "),n("p",[e._v("To see the list of events generated during the provisioning process, please refer to our "),n("RouterLink",{attrs:{to:"/hosting/references/events-reference.html"}},[e._v("events reference")]),e._v(".")],1)],1)}),[],!1,null,null,null);"function"==typeof a&&a(r);t.default=r.exports}}]);