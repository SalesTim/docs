"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5870],{71507:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>r,metadata:()=>p,toc:()=>s});var o=n(87462),a=(n(67294),n(3905)),i=n(61839);const r={author:"Guillaume Meyer",tags:["automation","connectors","azure","logic-apps"]},l="Setup the Automation Connector for Logic Apps",p={unversionedId:"automation/logic-apps-automation-connector",id:"automation/logic-apps-automation-connector",title:"Setup the Automation Connector for Logic Apps",description:"Abstract",source:"@site/contents/70-automation/logic-apps-automation-connector.md",sourceDirName:"70-automation",slug:"/automation/logic-apps-automation-connector",permalink:"/docs/automation/logic-apps-automation-connector",draft:!1,editUrl:"https://github.com/nboldhq/docs/tree/main/contents/70-automation/logic-apps-automation-connector.md",tags:[{label:"automation",permalink:"/docs/tags/automation"},{label:"connectors",permalink:"/docs/tags/connectors"},{label:"azure",permalink:"/docs/tags/azure"},{label:"logic-apps",permalink:"/docs/tags/logic-apps"}],version:"current",frontMatter:{author:"Guillaume Meyer",tags:["automation","connectors","azure","logic-apps"]},sidebar:"autoSidebar",previous:{title:"Available triggers and actions",permalink:"/docs/automation/automation-connectors-actions"},next:{title:"Setup the Automation Connector for Power Platform",permalink:"/docs/automation/power-platform-automation-connector"}},c={},s=[{value:"Procedure Overview",id:"procedure-overview",level:2},{value:"1. Create a new app registration in Azure Active Directory",id:"1-create-a-new-app-registration-in-azure-active-directory",level:2},{value:"2. Create an Azure Custom Connector Resource",id:"2-create-an-azure-custom-connector-resource",level:2},{value:"3. Import the nBold OpenAPI definition",id:"3-import-the-nbold-openapi-definition",level:2},{value:"<code>common</code>",id:"common",level:2},{value:"4. Next Steps",id:"4-next-steps",level:2}],u={toc:s};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"setup-the-automation-connector-for-logic-apps"},"Setup the Automation Connector for Logic Apps"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Abstract"),(0,a.kt)("br",{parentName:"p"}),"\n","This article explains how to register the nBold Connector as a custom connector for Azure ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/logic-apps/"},"Logic Apps"),"."),(0,a.kt)("admonition",{title:"\u23f1 Expected Duration",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Creating the custom connector only requires a few operations that are described hereafter as a detailed step-by-step procedure. Assuming you have all the required access and permissions to execute it properly, it should take ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"less than 10 minutes")),".")),(0,a.kt)("h2",{id:"procedure-overview"},"Procedure Overview"),(0,a.kt)("p",null,"Here is an overview of the overall procedure:"),(0,a.kt)(i.G,{chart:"graph LR\n\n    %% Nodes\n    s([Start])\n    subgraph azad[Azure AD]\n        appreg(1. AD App Registration)\n    end\n    subgraph azla[Azure Logic Apps]\n        customconnector(2. Create Azure Resource)\n        importopenapi(3. OpenAPI import)\n        logicapp(4. Logic App)\n    end\n    e([End])\n\n    %% Styles\n    classDef startend fill:#9099d8, stroke-width:0px;\n        class s startend\n        class e startend\n\n    %% Links\n    s --\x3e appreg\n    appreg --\x3e|Client id & secret| customconnector\n    customconnector --\x3e |Configure| importopenapi\n    importopenapi --\x3e |Use| logicapp\n    logicapp --\x3e e",mdxType:"Mermaid"}),(0,a.kt)("h2",{id:"1-create-a-new-app-registration-in-azure-active-directory"},"1. Create a new app registration in Azure Active Directory"),(0,a.kt)("p",null,"To securely access your Microsoft 365 environment through the Microsoft Graph APIs, the first step is to create a dedicated app registration. An Azure AD app registration identifies a third-party app such as nBold, and defines the permissions you wan to grant to it. To learn more, you can refer to ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/active-directory-how-applications-are-added"},"How and why applications are added to Azure AD"),"."),(0,a.kt)("p",null,"To create a new app registration, follow these steps:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Open your ",(0,a.kt)("a",{parentName:"li",href:"https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/Overview"},"Azure Active Directory portal")),(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("inlineCode",{parentName:"li"},"App registrations")," from the left menu"),(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"New registration")," from the top bar"),(0,a.kt)("li",{parentName:"ul"},"Give the app a name, such as:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"nBold Logic Apps Connector\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Select the option ",(0,a.kt)("inlineCode",{parentName:"li"},"Accounts in this organizational directory only"),", as you want to restrict access to your own tenant."),(0,a.kt)("li",{parentName:"ul"},"Use this web redirection URL:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://global.consent.azure-apim.net/redirect\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Register")),(0,a.kt)("li",{parentName:"ul"},"From the ",(0,a.kt)("inlineCode",{parentName:"li"},"Overview")," menu, copy the ",(0,a.kt)("inlineCode",{parentName:"li"},"Application (client) ID"),", and keep it as we're gonna reuse it later."),(0,a.kt)("li",{parentName:"ul"},"Open the ",(0,a.kt)("inlineCode",{parentName:"li"},"Authentication")," menu"),(0,a.kt)("li",{parentName:"ul"},"Ensure that the ",(0,a.kt)("inlineCode",{parentName:"li"},"Access tokens (used for implicit flows)")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"ID tokens (used for implicit and hybrid flows)")," options are chacked from the ",(0,a.kt)("inlineCode",{parentName:"li"},"Implicit grant and hybrid flows")," section, and save your updates if required."),(0,a.kt)("li",{parentName:"ul"},"Open the ",(0,a.kt)("inlineCode",{parentName:"li"},"Certificates and secrets")," menu and click ",(0,a.kt)("inlineCode",{parentName:"li"},"New client secret"),". A client secret is a kind of a password for your app, so manage it carefully."),(0,a.kt)("li",{parentName:"ul"},"Give a name to your client secret such as:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"nBold Logic Apps Connector client secret\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Select the expiration option, and click ",(0,a.kt)("inlineCode",{parentName:"li"},"Add")),(0,a.kt)("li",{parentName:"ul"},"Copy the ",(0,a.kt)("inlineCode",{parentName:"li"},"Client secret")," value (be careful, it will only be shown once), and keep it as we're gonna reuse it later."),(0,a.kt)("li",{parentName:"ul"},"Open the ",(0,a.kt)("inlineCode",{parentName:"li"},"API permissions")," from the left menu and click ",(0,a.kt)("inlineCode",{parentName:"li"},"Add a permission")," from the top bar"),(0,a.kt)("li",{parentName:"ul"},"Select ",(0,a.kt)("inlineCode",{parentName:"li"},"Microsoft Graph"),", then ",(0,a.kt)("inlineCode",{parentName:"li"},"Delegated permissions")),(0,a.kt)("li",{parentName:"ul"},"From the permissions list, select:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"OpenId permissions >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"email")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"offline_access")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"openid")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"profile")))),(0,a.kt)("li",{parentName:"ul"},"Directory >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Directory.AccessAsUser.All")))),(0,a.kt)("li",{parentName:"ul"},"Group >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Group.ReadWrite.All")))),(0,a.kt)("li",{parentName:"ul"},"InformationProtectionPolicy >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"InformationProtectionPolicy.Read")))),(0,a.kt)("li",{parentName:"ul"},"Mail >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Mail.Send")))),(0,a.kt)("li",{parentName:"ul"},"User >",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"User.Read")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"User.Read.All")))))),(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Add permissions")),(0,a.kt)("li",{parentName:"ul"},"Then click ",(0,a.kt)("inlineCode",{parentName:"li"},"Grant admin consent for...")," then ",(0,a.kt)("inlineCode",{parentName:"li"},"Yes"))),(0,a.kt)("p",null,"You're done, you've created your app registration for the nBold Connector. You should also have saved for later the ",(0,a.kt)("inlineCode",{parentName:"p"},"Application (client) ID")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Client secret")," that we're gonna use in the next steps."),(0,a.kt)("h2",{id:"2-create-an-azure-custom-connector-resource"},"2. Create an Azure Custom Connector Resource"),(0,a.kt)("p",null,"In Azure Logic Apps, you must first create the custom connector resource (steps below) before defining the behavior of the connector using an OpenAPI definition."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"In the Azure portal, on the ",(0,a.kt)("inlineCode",{parentName:"li"},"Azure services")," menu, choose ",(0,a.kt)("inlineCode",{parentName:"li"},"Create a resource"),"."),(0,a.kt)("li",{parentName:"ul"},"In New, enter ",(0,a.kt)("inlineCode",{parentName:"li"},"logic apps custom connector")," in the search box as your filter. Select ",(0,a.kt)("inlineCode",{parentName:"li"},"Logic Apps Custom Connector")," from the drop-down box."),(0,a.kt)("li",{parentName:"ul"},"In ",(0,a.kt)("inlineCode",{parentName:"li"},"Logic Apps Custom Connector"),", select ",(0,a.kt)("inlineCode",{parentName:"li"},"Create"),"."),(0,a.kt)("li",{parentName:"ul"},"Provide details for registering your connector. When you're done, choose ",(0,a.kt)("inlineCode",{parentName:"li"},"Review + create"),".")),(0,a.kt)("p",null,"Once you've created the custom connector resource, the custom connector menu should open automatically. If it doesn't, you can go to the subscription and resource group you selected and open it directly. Now that you have a custom connector, you can define the connector's behavior."),(0,a.kt)("admonition",{title:"Note",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"For reference, see ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/connectors/custom-connectors/create-logic-apps-connector"},"Create a custom connector in Azure Logic Apps"))),(0,a.kt)("h2",{id:"3-import-the-nbold-openapi-definition"},"3. Import the nBold OpenAPI definition"),(0,a.kt)("p",null,"Now that we've created both the app registration and the logic apps resource, we're gonna use it to create our custom connector."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Go to the Azure portal, and open the Logic Apps connector you created earlier in ",(0,a.kt)("inlineCode",{parentName:"li"},"Create an Azure Logic Apps custom connector"),"."),(0,a.kt)("li",{parentName:"ul"},"In your connector's menu, choose ",(0,a.kt)("inlineCode",{parentName:"li"},"Logic Apps Connector"),", then choose ",(0,a.kt)("inlineCode",{parentName:"li"},"Edit"),"."),(0,a.kt)("li",{parentName:"ul"},"Under ",(0,a.kt)("inlineCode",{parentName:"li"},"Custom connectors"),", select ",(0,a.kt)("inlineCode",{parentName:"li"},"REST")),(0,a.kt)("li",{parentName:"ul"},"From ",(0,a.kt)("inlineCode",{parentName:"li"},"Import mode"),", select ",(0,a.kt)("inlineCode",{parentName:"li"},"OpenAPI URL")," and and paste this URL:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://assets.nbold.io/api/nbold-api-openapi-latest.json\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Import")),(0,a.kt)("li",{parentName:"ul"},"From the ",(0,a.kt)("inlineCode",{parentName:"li"},"General information")," section, give your connector a name, such as:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"nBold\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Upload the connector logo that you can download from:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://nbold.co/wp-content/uploads/2020/12/Logo_degrade_blanc.svg\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Set the icon background color to:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"#000000\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Security")),(0,a.kt)("li",{parentName:"ul"},"Ensure that the authentication type is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"OAuth 2.0")," and the identity provider is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"Azure Active Directory")),(0,a.kt)("li",{parentName:"ul"},"Paste the previously copied ",(0,a.kt)("inlineCode",{parentName:"li"},"Client id")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"Client secret")),(0,a.kt)("li",{parentName:"ul"},"Ensure that the login url is set to:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://login.windows.net\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Ensure that the tenant ID is set to:")),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"common"},(0,a.kt)("inlineCode",{parentName:"h2"},"common")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Set the resource URL to:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://graph.microsoft.com\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Set the scope to:")),(0,a.kt)("hr",null),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"https://graph.microsoft.com/.default\n")),(0,a.kt)("hr",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Update connector")),(0,a.kt)("li",{parentName:"ul"},"From the ",(0,a.kt)("inlineCode",{parentName:"li"},"Security")," page, copy the generated ",(0,a.kt)("inlineCode",{parentName:"li"},"Redirect URL"),", and keep it as we're gonna reuse it later."),(0,a.kt)("li",{parentName:"ul"},"Navigate back to your app registration, open the ",(0,a.kt)("inlineCode",{parentName:"li"},"Authentication")," menu"),(0,a.kt)("li",{parentName:"ul"},"From the ",(0,a.kt)("inlineCode",{parentName:"li"},"Web")," section, add the previously copied URL to the list of ",(0,a.kt)("inlineCode",{parentName:"li"},"Redirect URIs")),(0,a.kt)("li",{parentName:"ul"},"Click ",(0,a.kt)("inlineCode",{parentName:"li"},"Save"))),(0,a.kt)("admonition",{title:"Note",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"For reference, see ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/connectors/custom-connectors/define-openapi-definition#import-the-openapi-definition-for-logic-apps"},"Import the OpenAPI definition for Logic Apps"))),(0,a.kt)("h2",{id:"4-next-steps"},"4. Next Steps"),(0,a.kt)("p",null,"Now that you've created the nBold connector, you can use it from your Azure ",(0,a.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/logic-apps/"},"Logic Apps")," environment. See the available ",(0,a.kt)("a",{parentName:"p",href:"/automation/automation-connectors-actions"},"Triggers and Actions")," for reference."),(0,a.kt)("admonition",{title:"\ud83d\udca1 To Go Further",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Here are a few interesting articles that may give you some guidelines and new ideas on how to use the the nBold Connector:"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nbold.co/power-automate-with-microsoft-teams-the-full-tutorial-with-examples/"},"Power Automate with Microsoft Teams: The Full Tutorial with Examples")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/power-automate/getting-started"},"Get started with Power Automate")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nbold.co/power-bi-with-microsoft-teams-how-to-manage-reports-effectively/"},"Power BI with Microsoft Teams: How to Manage Reports Effectively")))))}m.isMDXComponent=!0}}]);